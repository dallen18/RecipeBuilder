
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Recipes Look Up by Input Dish Name</title>
    <style>
        .json-key {
            font-weight: bold;
        }
        .json-container {
            padding-left: 20px;
            border-left: 2px solid #ddd;
            margin-bottom: 10px;
        }
        .recipe-image {
            max-width: none;
            height: auto;
            margin-top: 20px;
            display: block;
            width: 100%;
        }
    </style>
</head>
<body>

<div>
    <a href="./cardIndex.html" >
        <img
                src="../img/FaviconSix.png"
                height="40"
                width="110"
        />
    </a>
</div>


<h1>Food Recipes</h1>
<input type="text" id="searchTerm" placeholder="Enter a food item (e.g., beef)">
<button id="loadData">Load Recipes</button>
<div id="data"></div>

<script>
    document.getElementById('loadData').addEventListener('click', function() {
        var searchTerm = document.getElementById('searchTerm').value;
        const container = document.getElementById('data');
        container.innerHTML = '';

        fetch(`https://food-recipes-with-images.p.rapidapi.com/?q=${encodeURIComponent(searchTerm)}`, {
            method: 'GET',
            headers: {
                'X-Rapidapi-Key': 'f45a75ea1cmsh0dd1751d526138fp1f1ac1jsn1b2f727d5f7a',
                'X-Rapidapi-Host': 'food-recipes-with-images.p.rapidapi.com',
                'Cache-Control': 'no-cache'
            }
        })
        .then(response => response.json())
        .then(data => {
            data.d.forEach(recipe => {
                createJsonTree(container, recipe);
            });
        })
        .catch(error => {
            console.error('Error:', error);
            document.getElementById('data').textContent = 'Error loading data';
        });
    });

    function createJsonTree(container, obj) {
        if (typeof obj === 'object' && obj !== null) {
            const div = document.createElement('div');
            div.className = 'json-container';

            // Display the image
            if (obj.Image) {
                const img = document.createElement('img');
                img.src = obj.Image.startsWith('//') ? 'https:' + obj.Image : obj.Image;
                img.className = 'recipe-image';
                div.appendChild(img);
            }

            // Display other recipe details
            for (const key in obj) {
                if (key !== 'Image') { // Exclude the image URL from the text details
                    const keySpan = document.createElement('span');
                    keySpan.className = 'json-key';
                    keySpan.textContent = key + ': ';
                    div.appendChild(keySpan);

                    if (typeof obj[key] === 'object') {
                        createJsonTree(div, obj[key]);
                    } else {
                        const valueSpan = document.createElement('span');
                        valueSpan.textContent = obj[key];
                        div.appendChild(valueSpan);
                    }
                    div.appendChild(document.createElement('br'));
                }
            }
            container.appendChild(div);
        } else {
            container.textContent = obj;
        }
    }
</script>
</body>
</html>
