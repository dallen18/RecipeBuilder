<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coupon Data</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .coupon-container { display: flex; flex-wrap: wrap; }
        .coupon { border: 1px solid #ddd; margin: 10px; padding: 10px; width: calc(33% - 20px); }
        .coupon h2 { font-size: 18px; margin-top: 0; }
        .coupon-details, .coupon-code { font-size: 14px; }
        .coupon-code { font-weight: bold; }
    </style>
</head>
<body>
<div>
    <a href="./cardIndex.html" >
        <img
                src="../img/FaviconSix.png"
                height="40"
                width="110"
        />
    </a>
</div>

<h1>Updated Coupons For Customers</h1>
<div id="couponContainer" class="coupon-container">

</div>

<script>
        document.addEventListener('DOMContentLoaded', function() {
            fetchCoupons();
        });

        function fetchCoupons() {

            fetch('https://get-promo-codes.p.rapidapi.com/data/get-coupons/?page=1&sort=update_time_desc', {
                method: 'GET',
                headers: {
                    'X-Rapidapi-Key': 'f45a75ea1cmsh0dd1751d526138fp1f1ac1jsn1b2f727d5f7a',
                    'X-Rapidapi-Host': 'get-promo-codes.p.rapidapi.com'
                }
            })
            .then(response => response.json())
            .then(data => displayCoupons(data.data))
            .catch(error => console.error('Error:', error));
        }

        function displayCoupons(coupons) {
            const container = document.getElementById('couponContainer');
            coupons.forEach(coupon => {
                const couponDiv = document.createElement('div');
                couponDiv.className = 'coupon';

                const title = document.createElement('h2');
                title.innerText = coupon.title;
                couponDiv.appendChild(title);

                const description = document.createElement('div');
                description.className = 'coupon-details';
                description.innerText = coupon.description;
                couponDiv.appendChild(description);

                const code = document.createElement('div');
                code.className = 'coupon-code';
                code.innerText = 'Code: ' + coupon.code;
                couponDiv.appendChild(code);

                container.appendChild(couponDiv);
            });
        }
    </script>
</body>
</html>
